local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")
local UserInputService = game:GetService("UserInputService")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "XXHub"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 350)
Frame.Position = UDim2.new(0.5, -125, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Frame.Parent = ScreenGui
Frame.Active = true
Frame.Draggable = true

local Logo = Instance.new("ImageLabel")
Logo.Size = UDim2.new(0, 40, 0, 40)
Logo.Position = UDim2.new(0, 5, 0, 5)
Logo.BackgroundTransparency = 1
Logo.Image = "rbxassetid://6035047409" -- Иконка молнии
Logo.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -50, 0, 25)
Title.Position = UDim2.new(0, 50, 0, 10)
Title.Text = "XXHub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Title.Parent = Frame

local ToggleButton = Instance.new("ImageButton")
ToggleButton.Size = UDim2.new(0, 40, 0, 40)
ToggleButton.Position = UDim2.new(0, 0, 0.5, -20)
ToggleButton.Image = "rbxassetid://6035047409" -- Иконка молнии
ToggleButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ToggleButton.Parent = ScreenGui
ToggleButton.Active = true
ToggleButton.Draggable = true
local isMenuVisible = true

ToggleButton.MouseButton1Click:Connect(function()
    isMenuVisible = not isMenuVisible
    Frame.Visible = isMenuVisible
end)

local TabFrame = Instance.new("Frame")
TabFrame.Size = UDim2.new(0, 70, 1, -50)
TabFrame.Position = UDim2.new(0, 0, 0, 50)
TabFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TabFrame.Parent = Frame

local tabs = {"Player", "Misc", "Random", "FE", "NO FE", "Settings"}
local tabFrames = {}
local currentTab = "Player"

for i, tabName in ipairs(tabs) do
    local TabButton = Instance.new("TextButton")
    TabButton.Size = UDim2.new(1, -10, 0, 35)
    TabButton.Position = UDim2.new(0, 5, 0, 5 + (i-1) * 40)
    TabButton.Text = tabName
    TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    TabButton.Parent = TabFrame
    TabButton.MouseButton1Click:Connect(function()
        currentTab = tabName
        for _, frame in pairs(tabFrames) do
            frame.Visible = false
        end
        tabFrames[tabName].Visible = true
    end)

    local TabContent = Instance.new("Frame")
    TabContent.Size = UDim2.new(0, 180, 1, -50)
    TabContent.Position = UDim2.new(0, 70, 0, 50)
    TabContent.BackgroundTransparency = 1
    TabContent.Parent = Frame
    TabContent.Visible = (tabName == "Player")
    tabFrames[tabName] = TabContent
end

local flying = false
local noclip = false
local rainbow = false
local infJump = false
local esp = false
local killAura = false
local randomDance = false
local fireAura = false
local floatingOrbs = false
local trailEffect = false
local spinAnimation = false
local fallBack = false
local neonSword = false
local flySpeed = 50
local walkSpeed = 16
local jumpPower = 50
local currentTheme = "Dark"

local FlyFrame, FlyTitle, FlyToggle, FlySpeedSlider, FlySpeedBar, FlyControls, FlyMinimize, FlyBall
local ThemeFrame, ThemeTitle

local function applyTheme(theme)
    local function clearStrokes(container)
        for _, child in pairs(container:GetDescendants()) do
            if child:IsA("UIStroke") then
                child:Destroy()
            end
        end
    end

    clearStrokes(Frame)
    clearStrokes(FlyFrame)
    clearStrokes(ThemeFrame)
    clearStrokes(ToggleButton)

    if theme == "Dark" then
        Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(70, 70, 70)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TabFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(60, 60, 60) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(70, 70, 70)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        FlyControls.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        FlyBall.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(70, 70, 70)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70) end
        end
    elseif theme == "Light" then
        Frame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(200, 200, 200)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        TabFrame.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(180, 180, 180) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(200, 200, 200)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
        FlyControls.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
        FlyBall.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(200, 200, 200)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(200, 200, 200) end
        end
    elseif theme == "Enhanced" then
        Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 60)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(50, 50, 100)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(20, 20, 40)
        TabFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 50)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(40, 40, 80) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 60)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(50, 50, 100)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(20, 20, 40)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        FlyControls.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        FlyBall.BackgroundColor3 = Color3.fromRGB(50, 50, 100)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 60)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(50, 50, 100)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(20, 20, 40)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(50, 50, 100) end
        end
    elseif theme == "Neon" then
        Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(128, 0, 128)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local titleStroke = Instance.new("UIStroke")
        titleStroke.Color = Color3.fromRGB(128, 0, 128)
        titleStroke.Thickness = 1
        titleStroke.Parent = Title
        TabFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then 
                tab.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                local stroke = Instance.new("UIStroke")
                stroke.Color = Color3.fromRGB(128, 0, 128)
                stroke.Thickness = 2
                stroke.Parent = tab
            end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") then
                    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                    local stroke = Instance.new("UIStroke")
                    stroke.Color = Color3.fromRGB(128, 0, 128)
                    stroke.Thickness = 2
                    stroke.Parent = btn
                elseif btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                    local stroke = Instance.new("UIStroke")
                    stroke.Color = Color3.fromRGB(128, 0, 128)
                    stroke.Thickness = 1
                    stroke.Parent = btn
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local toggleStroke = Instance.new("UIStroke")
        toggleStroke.Color = Color3.fromRGB(128, 0, 128)
        toggleStroke.Thickness = 2
        toggleStroke.Parent = ToggleButton
        FlyFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(128, 0, 128)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyTitleStroke = Instance.new("UIStroke")
        flyTitleStroke.Color = Color3.fromRGB(128, 0, 128)
        flyTitleStroke.Thickness = 1
        flyTitleStroke.Parent = FlyTitle
        FlyToggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyToggleStroke = Instance.new("UIStroke")
        flyToggleStroke.Color = Color3.fromRGB(128, 0, 128)
        flyToggleStroke.Thickness = 2
        flyToggleStroke.Parent = FlyToggle
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flySpeedSliderStroke = Instance.new("UIStroke")
        flySpeedSliderStroke.Color = Color3.fromRGB(128, 0, 128)
        flySpeedSliderStroke.Thickness = 1
        flySpeedSliderStroke.Parent = FlySpeedSlider
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flySpeedBarStroke = Instance.new("UIStroke")
        flySpeedBarStroke.Color = Color3.fromRGB(128, 0, 128)
        flySpeedBarStroke.Thickness = 2
        flySpeedBarStroke.Parent = FlySpeedBar
        FlyControls.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyControlsStroke = Instance.new("UIStroke")
        flyControlsStroke.Color = Color3.fromRGB(128, 0, 128)
        flyControlsStroke.Thickness = 1
        flyControlsStroke.Parent = FlyControls
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyMinimizeStroke = Instance.new("UIStroke")
        flyMinimizeStroke.Color = Color3.fromRGB(128, 0, 128)
        flyMinimizeStroke.Thickness = 2
        flyMinimizeStroke.Parent = FlyMinimize
        FlyBall.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local flyBallStroke = Instance.new("UIStroke")
        flyBallStroke.Color = Color3.fromRGB(128, 0, 128)
        flyBallStroke.Thickness = 2
        flyBallStroke.Parent = FlyBall
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(128, 0, 128)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        local themeTitleStroke = Instance.new("UIStroke")
        themeTitleStroke.Color = Color3.fromRGB(128, 0, 128)
        themeTitleStroke.Thickness = 1
        themeTitleStroke.Parent = ThemeTitle
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then 
                btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                local stroke = Instance.new("UIStroke")
                stroke.Color = Color3.fromRGB(128, 0, 128)
                stroke.Thickness = 2
                stroke.Parent = btn
            end
        end
    elseif theme == "Red" then
        Frame.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(100, 0, 0)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        TabFrame.BackgroundColor3 = Color3.fromRGB(40, 0, 0)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(80, 0, 0) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(100, 0, 0)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        FlyControls.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        FlyBall.BackgroundColor3 = Color3.fromRGB(70, 0, 0)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(100, 0, 0)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(70, 0, 0) end
        end
    elseif theme == "Blue" then
        Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 50)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(0, 0, 100)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
        TabFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 40)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(0, 0, 80) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 50)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(0, 0, 100)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
        FlyControls.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
        FlyBall.BackgroundColor3 = Color3.fromRGB(0, 0, 70)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 50)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(0, 0, 100)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(0, 0, 70) end
        end
    elseif theme == "Green" then
        Frame.BackgroundColor3 = Color3.fromRGB(0, 50, 0)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(0, 100, 0)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        TabFrame.BackgroundColor3 = Color3.fromRGB(0, 40, 0)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(0, 80, 0) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(0, 50, 0)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(0, 100, 0)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        FlyControls.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        FlyBall.BackgroundColor3 = Color3.fromRGB(0, 70, 0)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(0, 50, 0)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(0, 100, 0)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(0, 70, 0) end
        end
    elseif theme == "Purple" then
        Frame.BackgroundColor3 = Color3.fromRGB(50, 0, 50)
        local frameStroke = Instance.new("UIStroke")
        frameStroke.Color = Color3.fromRGB(100, 0, 100)
        frameStroke.Thickness = 2
        frameStroke.Parent = Frame
        Title.BackgroundColor3 = Color3.fromRGB(100, 0, 100)
        TabFrame.BackgroundColor3 = Color3.fromRGB(40, 0, 40)
        for _, tab in pairs(TabFrame:GetChildren()) do
            if tab:IsA("TextButton") then tab.BackgroundColor3 = Color3.fromRGB(80, 0, 80) end
        end
        for _, frame in pairs(tabFrames) do
            for _, btn in pairs(frame:GetChildren()) do
                if btn:IsA("TextButton") or btn:IsA("TextLabel") then
                    btn.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
                end
            end
        end
        ToggleButton.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
        FlyFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 50)
        local flyFrameStroke = Instance.new("UIStroke")
        flyFrameStroke.Color = Color3.fromRGB(100, 0, 100)
        flyFrameStroke.Thickness = 2
        flyFrameStroke.Parent = FlyFrame
        FlyTitle.BackgroundColor3 = Color3.fromRGB(100, 0, 100)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
        FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
        FlySpeedBar.BackgroundColor3 = Color3.fromRGB(100, 0, 100)
        FlyControls.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
        FlyMinimize.BackgroundColor3 = Color3.fromRGB(100, 0, 100)
        FlyBall.BackgroundColor3 = Color3.fromRGB(70, 0, 70)
        ThemeFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 50)
        local themeFrameStroke = Instance.new("UIStroke")
        themeFrameStroke.Color = Color3.fromRGB(100, 0, 100)
        themeFrameStroke.Thickness = 2
        themeFrameStroke.Parent = ThemeFrame
        ThemeTitle.BackgroundColor3 = Color3.fromRGB(100, 0, 100)
        for _, btn in pairs(ThemeFrame:GetChildren()) do
            if btn:IsA("TextButton") then btn.BackgroundColor3 = Color3.fromRGB(70, 0, 70) end
        end
    end
    currentTheme = theme
end

local PlayerFrame = tabFrames["Player"]

local PlayerIcon = Instance.new("ImageLabel")
PlayerIcon.Size = UDim2.new(0, 35, 0, 35)
PlayerIcon.Position = UDim2.new(0, 5, 0, 5)
PlayerIcon.BackgroundTransparency = 1
PlayerIcon.Parent = PlayerFrame

local userId = player.UserId
local thumbType = Enum.ThumbnailType.AvatarBust
local thumbSize = Enum.ThumbnailSize.Size100x100
local content, isReady = game.Players:GetUserThumbnailAsync(userId, thumbType, thumbSize)
PlayerIcon.Image = content

local PlayerName = Instance.new("TextLabel")
PlayerName.Size = UDim2.new(1, -45, 0, 35)
PlayerName.Position = UDim2.new(0, 45, 0, 5)
PlayerName.Text = "Ник: " .. player.Name
PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerName.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
PlayerName.Parent = PlayerFrame

local FlyButton = Instance.new("TextButton")
FlyButton.Size = UDim2.new(1, -10, 0, 35)
FlyButton.Position = UDim2.new(0, 5, 0, 45)
FlyButton.Text = "Полет"
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FlyButton.Parent = PlayerFrame

local NoclipButton = Instance.new("TextButton")
NoclipButton.Size = UDim2.new(1, -10, 0, 35)
NoclipButton.Position = UDim2.new(0, 5, 0, 85)
NoclipButton.Text = "Noclip: Выкл"
NoclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
NoclipButton.Parent = PlayerFrame

local ESPButton = Instance.new("TextButton")
ESPButton.Size = UDim2.new(1, -10, 0, 35)
ESPButton.Position = UDim2.new(0, 5, 0, 125)
ESPButton.Text = "ESP: Выкл"
ESPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ESPButton.Parent = PlayerFrame

local WalkSpeedSlider = Instance.new("TextLabel")
WalkSpeedSlider.Size = UDim2.new(1, -10, 0, 20)
WalkSpeedSlider.Position = UDim2.new(0, 5, 0, 165)
WalkSpeedSlider.Text = "Скорость: " .. walkSpeed
WalkSpeedSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
WalkSpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
WalkSpeedSlider.Parent = PlayerFrame

local WalkSpeedBar = Instance.new("TextButton")
WalkSpeedBar.Size = UDim2.new(1, -10, 0, 10)
WalkSpeedBar.Position = UDim2.new(0, 5, 0, 190)
WalkSpeedBar.Text = ""
WalkSpeedBar.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
WalkSpeedBar.Parent = PlayerFrame
WalkSpeedBar.MouseButton1Down:Connect(function()
    local mouse = player:GetMouse()
    local conn
    conn = mouse.Move:Connect(function()
        local value = math.clamp((mouse.X - WalkSpeedBar.AbsolutePosition.X) / WalkSpeedBar.AbsoluteSize.X, 0, 1)
        walkSpeed = math.floor(16 + value * 84)
        if not flying then humanoid.WalkSpeed = walkSpeed end
        WalkSpeedSlider.Text = "Скорость: " .. walkSpeed
    end)
    mouse.Button1Up:Wait()
    conn:Disconnect()
end)

local JumpPowerSlider = Instance.new("TextLabel")
JumpPowerSlider.Size = UDim2.new(1, -10, 0, 20)
JumpPowerSlider.Position = UDim2.new(0, 5, 0, 205)
JumpPowerSlider.Text = "Прыжок: " .. jumpPower
JumpPowerSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpPowerSlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
JumpPowerSlider.Parent = PlayerFrame

local JumpPowerBar = Instance.new("TextButton")
JumpPowerBar.Size = UDim2.new(1, -10, 0, 10)
JumpPowerBar.Position = UDim2.new(0, 5, 0, 230)
JumpPowerBar.Text = ""
JumpPowerBar.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
JumpPowerBar.Parent = PlayerFrame
JumpPowerBar.MouseButton1Down:Connect(function()
    local mouse = player:GetMouse()
    local conn
    conn = mouse.Move:Connect(function()
        local value = math.clamp((mouse.X - JumpPowerBar.AbsolutePosition.X) / JumpPowerBar.AbsoluteSize.X, 0, 1)
        jumpPower = math.floor(50 + value * 450)
        if not flying then 
            humanoid.JumpPower = jumpPower
            humanoid.JumpHeight = jumpPower / 10
        end
        JumpPowerSlider.Text = "Прыжок: " .. jumpPower
    end)
    mouse.Button1Up:Wait()
    conn:Disconnect()
end)

local FlyGui = Instance.new("ScreenGui")
FlyGui.Name = "FlyMenu"
FlyGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
FlyGui.ResetOnSpawn = false

FlyFrame = Instance.new("Frame")
FlyFrame.Size = UDim2.new(0, 180, 0, 180)
FlyFrame.Position = UDim2.new(0.5, -90, 0.5, -90)
FlyFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
FlyFrame.Parent = FlyGui
FlyFrame.Active = true
FlyFrame.Draggable = true
FlyFrame.Visible = false

FlyTitle = Instance.new("TextLabel")
FlyTitle.Size = UDim2.new(1, 0, 0, 25)
FlyTitle.Text = "Полет"
FlyTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
FlyTitle.Parent = FlyFrame

FlyToggle = Instance.new("TextButton")
FlyToggle.Size = UDim2.new(1, -10, 0, 35)
FlyToggle.Position = UDim2.new(0, 5, 0, 35)
FlyToggle.Text = "Вкл/Выкл"
FlyToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyToggle.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FlyToggle.Parent = FlyFrame

FlySpeedSlider = Instance.new("TextLabel")
FlySpeedSlider.Size = UDim2.new(1, -10, 0, 20)
FlySpeedSlider.Position = UDim2.new(0, 5, 0, 75)
FlySpeedSlider.Text = "Скорость: " .. flySpeed
FlySpeedSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
FlySpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FlySpeedSlider.Parent = FlyFrame

FlySpeedBar = Instance.new("TextButton")
FlySpeedBar.Size = UDim2.new(1, -10, 0, 10)
FlySpeedBar.Position = UDim2.new(0, 5, 0, 100)
FlySpeedBar.Text = ""
FlySpeedBar.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
FlySpeedBar.Parent = FlyFrame
FlySpeedBar.MouseButton1Down:Connect(function()
    local mouse = player:GetMouse()
    local conn
    conn = mouse.Move:Connect(function()
        local value = math.clamp((mouse.X - FlySpeedBar.AbsolutePosition.X) / FlySpeedBar.AbsoluteSize.X, 0, 1)
        flySpeed = math.floor(10 + value * 90)
        FlySpeedSlider.Text = "Скорость: " .. flySpeed
    end)
    mouse.Button1Up:Wait()
    conn:Disconnect()
end)

FlyControls = Instance.new("TextLabel")
FlyControls.Size = UDim2.new(1, -10, 0, 40)
FlyControls.Position = UDim2.new(0, 5, 0, 115)
FlyControls.Text = "Управление:\nДжойстик - движение\nПрыжок - вверх\nУдержание - вниз"
FlyControls.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyControls.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FlyControls.TextSize = 12
FlyControls.TextWrapped = true
FlyControls.Parent = FlyFrame

FlyMinimize = Instance.new("TextButton")
FlyMinimize.Size = UDim2.new(0, 25, 0, 25)
FlyMinimize.Position = UDim2.new(1, -30, 0, 5)
FlyMinimize.Text = "-"
FlyMinimize.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyMinimize.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
FlyMinimize.Parent = FlyFrame

FlyBall = Instance.new("TextButton")
FlyBall.Size = UDim2.new(0, 40, 0, 40)
FlyBall.Position = UDim2.new(0.5, -20, 0.3, -20)
FlyBall.Text = "F"
FlyBall.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyBall.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FlyBall.Parent = FlyGui
FlyBall.Visible = false
FlyBall.Active = true
FlyBall.Draggable = true

local MiscFrame = tabFrames["Misc"]

local InfJumpButton = Instance.new("TextButton")
InfJumpButton.Size = UDim2.new(1, -10, 0, 35)
InfJumpButton.Position = UDim2.new(0, 5, 0, 5)
InfJumpButton.Text = "Бесконечный прыжок: Выкл"
InfJumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InfJumpButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
InfJumpButton.Parent = MiscFrame

local ClickTPButton = Instance.new("TextButton")
ClickTPButton.Size = UDim2.new(1, -10, 0, 35)
ClickTPButton.Position = UDim2.new(0, 5, 0, 45)
ClickTPButton.Text = "Телепорт по тапу: Выкл"
ClickTPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ClickTPButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ClickTPButton.Parent = MiscFrame

local KillAuraButton = Instance.new("TextButton")
KillAuraButton.Size = UDim2.new(1, -10, 0, 35)
KillAuraButton.Position = UDim2.new(0, 5, 0, 85)
KillAuraButton.Text = "Kill Aura: Выкл"
KillAuraButton.TextColor3 = Color3.fromRGB(255, 255, 255)
KillAuraButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
KillAuraButton.Parent = MiscFrame

local RandomFrame = tabFrames["Random"]

local DanceButton = Instance.new("TextButton")
DanceButton.Size = UDim2.new(1, -10, 0, 35)
DanceButton.Position = UDim2.new(0, 5, 0, 5)
DanceButton.Text = "Танцы: Выкл"
DanceButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DanceButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
DanceButton.Parent = RandomFrame

local FallBackButton = Instance.new("TextButton")
FallBackButton.Size = UDim2.new(1, -10, 0, 35)
FallBackButton.Position = UDim2.new(0, 5, 0, 45)
FallBackButton.Text = "Упасть назад: Выкл"
FallBackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FallBackButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FallBackButton.Parent = RandomFrame

local FEFrame = tabFrames["FE"]

local PartButton = Instance.new("TextButton")
PartButton.Size = UDim2.new(1, -10, 0, 35)
PartButton.Position = UDim2.new(0, 5, 0, 5)
PartButton.Text = "Part (Ring)"
PartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PartButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
PartButton.Parent = FEFrame

local NOFEFrame = tabFrames["NO FE"]

local FireAuraButton = Instance.new("TextButton")
FireAuraButton.Size = UDim2.new(1, -10, 0, 35)
FireAuraButton.Position = UDim2.new(0, 5, 0, 5)
FireAuraButton.Text = "Fire Aura: Выкл"
FireAuraButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FireAuraButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FireAuraButton.Parent = NOFEFrame

local FloatingOrbsButton = Instance.new("TextButton")
FloatingOrbsButton.Size = UDim2.new(1, -10, 0, 35)
FloatingOrbsButton.Position = UDim2.new(0, 5, 0, 45)
FloatingOrbsButton.Text = "Floating Orbs: Выкл"
FloatingOrbsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FloatingOrbsButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
FloatingOrbsButton.Parent = NOFEFrame

local TrailEffectButton = Instance.new("TextButton")
TrailEffectButton.Size = UDim2.new(1, -10, 0, 35)
TrailEffectButton.Position = UDim2.new(0, 5, 0, 85)
TrailEffectButton.Text = "Trail Effect: Выкл"
TrailEffectButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TrailEffectButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
TrailEffectButton.Parent = NOFEFrame

local SpinAnimationButton = Instance.new("TextButton")
SpinAnimationButton.Size = UDim2.new(1, -10, 0, 35)
SpinAnimationButton.Position = UDim2.new(0, 5, 0, 125)
SpinAnimationButton.Text = "Spin Animation: Выкл"
SpinAnimationButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SpinAnimationButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
SpinAnimationButton.Parent = NOFEFrame

local NeonSwordButton = Instance.new("TextButton")
NeonSwordButton.Size = UDim2.new(1, -10, 0, 35)
NeonSwordButton.Position = UDim2.new(0, 5, 0, 165)
NeonSwordButton.Text = "Neon Sword: Выкл"
NeonSwordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NeonSwordButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
NeonSwordButton.Parent = NOFEFrame

local RainbowButton = Instance.new("TextButton")
RainbowButton.Size = UDim2.new(1, -10, 0, 35)
RainbowButton.Position = UDim2.new(0, 5, 0, 205)
RainbowButton.Text = "Радуга: Выкл"
RainbowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RainbowButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
RainbowButton.Parent = NOFEFrame

local SettingsFrame = tabFrames["Settings"]

local AuthorLabel = Instance.new("TextLabel")
AuthorLabel.Size = UDim2.new(1, -10, 0, 35)
AuthorLabel.Position = UDim2.new(0, 5, 0, 5)
AuthorLabel.Text = "Автор: im Kills и Huawel_top"
AuthorLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AuthorLabel.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
AuthorLabel.TextWrapped = true
AuthorLabel.Parent = SettingsFrame

local ThemeButton = Instance.new("TextButton")
ThemeButton.Size = UDim2.new(1, -10, 0, 35)
ThemeButton.Position = UDim2.new(0, 5, 0, 45)
ThemeButton.Text = "Выбрать тему"
ThemeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ThemeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ThemeButton.Parent = SettingsFrame

local ThemeGui = Instance.new("ScreenGui")
ThemeGui.Name = "ThemeMenu"
ThemeGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ThemeGui.ResetOnSpawn = false

ThemeFrame = Instance.new("Frame")
ThemeFrame.Size = UDim2.new(0, 150, 0, 280)
ThemeFrame.Position = UDim2.new(0.5, -75, 0.5, -140)
ThemeFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ThemeFrame.Parent = ThemeGui
ThemeFrame.Visible = false
ThemeFrame.Active = true
ThemeFrame.Draggable = true

ThemeTitle = Instance.new("TextLabel")
ThemeTitle.Size = UDim2.new(1, 0, 0, 25)
ThemeTitle.Text = "Выбор темы"
ThemeTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ThemeTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ThemeTitle.Parent = ThemeFrame

local themes = {"Dark", "Light", "Enhanced", "Neon", "Red", "Blue", "Green", "Purple"}
for i, themeName in ipairs(themes) do
    local ThemeOption = Instance.new("TextButton")
    ThemeOption.Size = UDim2.new(1, -10, 0, 25)
    ThemeOption.Position = UDim2.new(0, 5, 0, 30 + (i-1) * 30)
    ThemeOption.Text = themeName
    ThemeOption.TextColor3 = Color3.fromRGB(255, 255, 255)
    ThemeOption.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    ThemeOption.Parent = ThemeFrame
    ThemeOption.MouseButton1Click:Connect(function()
        applyTheme(themeName)
        ThemeFrame.Visible = false
    end)
end

local CloseThemeButton = Instance.new("TextButton")
CloseThemeButton.Size = UDim2.new(0, 25, 0, 25)
CloseThemeButton.Position = UDim2.new(1, -30, 0, 5)
CloseThemeButton.Text = "X"
CloseThemeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseThemeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
CloseThemeButton.Parent = ThemeFrame
CloseThemeButton.MouseButton1Click:Connect(function()
    ThemeFrame.Visible = false
end)

ThemeButton.MouseButton1Click:Connect(function()
    ThemeFrame.Visible = true
end)

local function toggleFly()
    flying = not flying
    if flying then
        local bg = Instance.new("BodyGyro")
        bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        bg.P = 9e4
        bg.Parent = rootPart

        local bv = Instance.new("BodyVelocity")
        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        bv.Velocity = Vector3.new(0, 0, 0)
        bv.Parent = rootPart

        humanoid.PlatformStand = true
        spawn(function()
            while flying and rootPart and bg.Parent and bv.Parent do
                bg.CFrame = workspace.CurrentCamera.CFrame
                local moveDir = humanoid.MoveDirection * flySpeed
                local vertical = 0
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) or humanoid.Jump then
                    vertical = flySpeed
                elseif UserInputService.TouchLongPress then
                    vertical = -flySpeed
                end
                bv.Velocity = moveDir + Vector3.new(0, vertical, 0)
                wait(0.01)
            end
            bg:Destroy()
            bv:Destroy()
            humanoid.PlatformStand = false
            humanoid.WalkSpeed = walkSpeed
            humanoid.JumpPower = jumpPower
            humanoid.JumpHeight = jumpPower / 10
        end)
    end
end

local function toggleNoclip()
    noclip = not noclip
    NoclipButton.Text = "Noclip: " .. (noclip and "Вкл" or "Выкл")
    spawn(function()
        while noclip and character do
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
            wait()
        end
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end)
end

local function toggleESP()
    esp = not esp
    ESPButton.Text = "ESP: " .. (esp and "Вкл" or "Выкл")
    if esp then
        spawn(function()
            while esp do
                for _, plr in pairs(game.Players:GetPlayers()) do
                    if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
                        local head = plr.Character.Head
                        local billboard = head:FindFirstChild("ESPBillboard")
                        if not billboard then
                            billboard = Instance.new("BillboardGui")
                            billboard.Name = "ESPBillboard"
                            billboard.Size = UDim2.new(0, 100, 0, 30)
                            billboard.StudsOffset = Vector3.new(0, 3, 0)
                            billboard.Adornee = head
                            billboard.Parent = head
                            local nameLabel = Instance.new("TextLabel")
                            nameLabel.Size = UDim2.new(1, 0, 1, 0)
                            nameLabel.Text = plr.Name
                            nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                            nameLabel.BackgroundTransparency = 1
                            nameLabel.Parent = billboard
                        end
                    end
                end
                wait(0.5)
            end
            for _, plr in pairs(game.Players:GetPlayers()) do
                if plr.Character and plr.Character:FindFirstChild("Head") then
                    local billboard = plr.Character.Head:FindFirstChild("ESPBillboard")
                    if billboard then billboard:Destroy() end
                end
            end
        end)
    end
end

local function toggleRainbow()
    rainbow = not rainbow
    RainbowButton.Text = "Радуга: " .. (rainbow and "Вкл" or "Выкл")
    if rainbow then
        spawn(function()
            while rainbow and character do
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Color = Color3.fromHSV(tick() % 1, 1, 1)
                    end
                end
                wait(0.1)
            end
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Color = Color3.fromRGB(255, 255, 255)
                end
            end
        end)
    end
end

local function toggleInfJump()
    infJump = not infJump
    InfJumpButton.Text = "Бесконечный прыжок: " .. (infJump and "Вкл" or "Выкл")
    if infJump then
        UserInputService.JumpRequest:Connect(function()
            if infJump then
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    end
end

local clickTPActive = false
local function toggleClickTP()
    clickTPActive = not clickTPActive
    ClickTPButton.Text = "Телепорт по тапу: " .. (clickTPActive and "Вкл" or "Выкл")
    if clickTPActive then
        spawn(function()
            while clickTPActive do
                UserInputService.InputBegan:Wait()
                if UserInputService:GetMouseLocation() then
                    local ray = workspace.CurrentCamera:ScreenPointToRay(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y)
                    local hit, pos = workspace:FindPartOnRay(Ray.new(ray.Origin, ray.Direction * 1000), character)
                    if pos then
                        rootPart.CFrame = CFrame.new(pos)
                    end
                end
            end
        end)
    end
end

local function toggleKillAura()
    killAura = not killAura
    KillAuraButton.Text = "Kill Aura: " .. (killAura and "Вкл" or "Выкл")
    if killAura then
        spawn(function()
            while killAura and character do
                for _, plr in pairs(game.Players:GetPlayers()) do
                    if plr ~= player and plr.Character and plr.Character:FindFirstChild("Humanoid") then
                        local target = plr.Character.HumanoidRootPart
                        if (target.Position - rootPart.Position).Magnitude <= 10 then
                            plr.Character.Humanoid:TakeDamage(10)
                        end
                    end
                end
                wait(0.5)
            end
        end)
    end
end

local function toggleRandomDance()
    randomDance = not randomDance
    DanceButton.Text = "Танцы: " .. (randomDance and "Вкл" or "Выкл")
    if randomDance then
        local dances = {
            "rbxassetid://507771019",
            "rbxassetid://507771955",
            "rbxassetid://507777623"
        }
        local anim = Instance.new("Animation")
        local track
        spawn(function()
            while randomDance and character and humanoid do
                anim.AnimationId = dances[math.random(1, #dances)]
                track = humanoid:LoadAnimation(anim)
                track:Play()
                wait(math.random(3, 6))
                track:Stop()
            end
            if track then track:Stop() end
        end)
    end
end

local function toggleFireAura()
    fireAura = not fireAura
    FireAuraButton.Text = "Fire Aura: " .. (fireAura and "Вкл" or "Выкл")
    if fireAura then
        spawn(function()
            while fireAura and character do
                local fire = Instance.new("Fire")
                fire.Size = 5
                fire.Color = Color3.fromRGB(255, 100, 0)
                fire.Parent = rootPart
                wait(0.1)
                fire:Destroy()
            end
        end)
    end
end

local function toggleFloatingOrbs()
    floatingOrbs = not floatingOrbs
    FloatingOrbsButton.Text = "Floating Orbs: " .. (floatingOrbs and "Вкл" or "Выкл")
    if floatingOrbs then
        spawn(function()
            local orbs = {}
            for i = 1, 5 do
                local orb = Instance.new("Part")
                orb.Size = Vector3.new(0.5, 0.5, 0.5)
                orb.Position = rootPart.Position
                orb.Anchored = true
                orb.CanCollide = false
                orb.Material = Enum.Material.Neon
                orb.Color = Color3.fromRGB(math.random(0, 255), math.random(0, 255), math.random(0, 255))
                orb.Parent = workspace
                table.insert(orbs, orb)
            end
            local angle = 0
            while floatingOrbs and character do
                angle = angle + 0.05
                for i, orb in ipairs(orbs) do
                    local offset = Vector3.new(math.sin(angle + (i * 2 * math.pi / 5)) * 5, math.sin(angle) * 2, math.cos(angle + (i * 2 * math.pi / 5)) * 5)
                    orb.Position = rootPart.Position + offset
                end
                wait(0.01)
            end
            for _, orb in ipairs(orbs) do
                orb:Destroy()
            end
        end)
    end
end

local function toggleTrailEffect()
    trailEffect = not trailEffect
    TrailEffectButton.Text = "Trail Effect: " .. (trailEffect and "Вкл" or "Выкл")
    if trailEffect then
        local trail = Instance.new("Trail")
        trail.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 0)),
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 255, 0)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 0, 255))
        })
        trail.Lifetime = 1
        trail.WidthScale = NumberSequence.new(1)
        trail.Attachment0 = Instance.new("Attachment", rootPart)
        trail.Attachment1 = Instance.new("Attachment", rootPart)
        trail.Attachment1.Position = Vector3.new(0, -2, 0)
        trail.Parent = rootPart
        spawn(function()
            while trailEffect and character do
                wait(0.1)
            end
            trail:Destroy()
        end)
    end
end

local function toggleSpinAnimation()
    spinAnimation = not spinAnimation
    SpinAnimationButton.Text = "Spin Animation: " .. (spinAnimation and "Вкл" or "Выкл")
    if spinAnimation then
        spawn(function()
            local particle = Instance.new("ParticleEmitter")
            particle.Color = ColorSequence.new(Color3.fromRGB(255, 255, 0))
            particle.Size = NumberSequence.new(0.5)
            particle.Lifetime = NumberRange.new(1, 2)
            particle.Rate = 20
            particle.Parent = rootPart
            while spinAnimation and character do
                rootPart.CFrame = rootPart.CFrame * CFrame.Angles(0, math.rad(10), 0)
                wait(0.01)
            end
            particle:Destroy()
        end)
    end
end

local function toggleFallBack()
    fallBack = not fallBack
    FallBackButton.Text = "Упасть назад: " .. (fallBack and "Вкл" or "Выкл")
    if fallBack then
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://188632011"
        local track = humanoid:LoadAnimation(anim)
        spawn(function()
            while fallBack and character and humanoid do
                if not track.IsPlaying then
                    track:Play()
                end
                wait(2.5)
            end
            track:Stop()
        end)
    end
end

local function toggleNeonSword()
    neonSword = not neonSword
    NeonSwordButton.Text = "Neon Sword: " .. (neonSword and "Вкл" or "Выкл")
    if neonSword then
        local sword = Instance.new("Part")
        sword.Size = Vector3.new(0.2, 4, 1)
        sword.Position = rootPart.Position
        sword.Anchored = false
        sword.CanCollide = false
        sword.Material = Enum.Material.Neon
        sword.Color = Color3.fromRGB(0, 255, 255)
        sword.Parent = workspace

        local weld = Instance.new("WeldConstraint")
        weld.Part0 = sword
        weld.Part1 = character:FindFirstChild("RightHand") or character:FindFirstChild("Right Arm")
        weld.Parent = sword

        local particle = Instance.new("ParticleEmitter")
        particle.Color = ColorSequence.new(Color3.fromRGB(0, 255, 255))
        particle.Size = NumberSequence.new(0.2)
        particle.Lifetime = NumberRange.new(0.5, 1)
        particle.Rate = 50
        particle.Parent = sword

        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://507771019"
        local track = humanoid:LoadAnimation(anim)

        spawn(function()
            while neonSword and character do
                if not track.IsPlaying then
                    track:Play()
                end
                sword.Color = Color3.fromHSV(tick() % 1, 1, 1)
                particle.Color = ColorSequence.new(sword.Color)
                wait(2)
            end
            sword:Destroy()
            track:Stop()
        end)
    end
end

FlyButton.MouseButton1Click:Connect(function()
    FlyFrame.Visible = true
end)

FlyToggle.MouseButton1Click:Connect(function()
    toggleFly()
    FlyToggle.Text = flying and "Выключить" or "Включить"
end)

FlyMinimize.MouseButton1Click:Connect(function()
    FlyFrame.Visible = false
    FlyBall.Visible = true
end)

FlyBall.MouseButton1Click:Connect(function()
    FlyFrame.Visible = true
    FlyBall.Visible = false
end)

NoclipButton.MouseButton1Click:Connect(toggleNoclip)
ESPButton.MouseButton1Click:Connect(toggleESP)
InfJumpButton.MouseButton1Click:Connect(toggleInfJump)
ClickTPButton.MouseButton1Click:Connect(toggleClickTP)
KillAuraButton.MouseButton1Click:Connect(toggleKillAura)
RainbowButton.MouseButton1Click:Connect(toggleRainbow)
DanceButton.MouseButton1Click:Connect(toggleRandomDance)
FallBackButton.MouseButton1Click:Connect(toggleFallBack)
PartButton.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/hm5650/SuperRing/refs/heads/main/RingPart"))()
end)
NeonSwordButton.MouseButton1Click:Connect(toggleNeonSword)
FireAuraButton.MouseButton1Click:Connect(toggleFireAura)
FloatingOrbsButton.MouseButton1Click:Connect(toggleFloatingOrbs)
TrailEffectButton.MouseButton1Click:Connect(toggleTrailEffect)
SpinAnimationButton.MouseButton1Click:Connect(toggleSpinAnimation)

player.CharacterAdded:Connect(function(char)
    character = char
    rootPart = char:WaitForChild("HumanoidRootPart")
    humanoid = char:WaitForChild("Humanoid")
    humanoid.WalkSpeed = walkSpeed
    humanoid.JumpPower = jumpPower
    humanoid.JumpHeight = jumpPower / 10
    PlayerName.Text = "Ник: " .. player.Name
    if noclip then
        toggleNoclip()
        wait(0.1)
        toggleNoclip()
        NoclipButton.Text = "Noclip: Вкл"
    else
        NoclipButton.Text = "Noclip: Выкл"
    end
    if flying then
        toggleFly()
        wait(0.1)
        toggleFly()
        FlyToggle.Text = "Выключить"
    else
        FlyToggle.Text = "Включить"
    end
    if esp then
        toggleESP()
        wait(0.1)
        toggleESP()
        ESPButton.Text = "ESP: Вкл"
    else
        ESPButton.Text = "ESP: Выкл"
    end
    if rainbow then
        toggleRainbow()
        wait(0.1)
        toggleRainbow()
        RainbowButton.Text = "Радуга: Вкл"
    else
        RainbowButton.Text = "Радуга: Выкл"
    end
    if randomDance then
        toggleRandomDance()
        wait(0.1)
        toggleRandomDance()
        DanceButton.Text = "Танцы: Вкл"
    else
        DanceButton.Text = "Танцы: Выкл"
    end
    if fallBack then
        toggleFallBack()
        wait(0.1)
        toggleFallBack()
        FallBackButton.Text = "Упасть назад: Вкл"
    else
        FallBackButton.Text = "Упасть назад: Выкл"
    end
    if fireAura then
        toggleFireAura()
        wait(0.1)
        toggleFireAura()
        FireAuraButton.Text = "Fire Aura: Вкл"
    else
        FireAuraButton.Text = "Fire Aura: Выкл"
    end
    if floatingOrbs then
        toggleFloatingOrbs()
        wait(0.1)
        toggleFloatingOrbs()
        FloatingOrbsButton.Text = "Floating Orbs: Вкл"
    else
        FloatingOrbsButton.Text = "Floating Orbs: Выкл"
    end
    if trailEffect then
        toggleTrailEffect()
        wait(0.1)
        toggleTrailEffect()
        TrailEffectButton.Text = "Trail Effect: Вкл"
    else
        TrailEffectButton.Text = "Trail Effect: Выкл"
    end
    if spinAnimation then
        toggleSpinAnimation()
        wait(0.1)
        toggleSpinAnimation()
        SpinAnimationButton.Text = "Spin Animation: Вкл"
    else
        SpinAnimationButton.Text = "Spin Animation: Выкл"
    end
    if neonSword then
        toggleNeonSword()
        wait(0.1)
        toggleNeonSword()
        NeonSwordButton.Text = "Neon Sword: Вкл"
    else
        NeonSwordButton.Text = "Neon Sword: Выкл"
    end
    applyTheme(currentTheme)
end)

applyTheme("Dark")

-- я устал.
